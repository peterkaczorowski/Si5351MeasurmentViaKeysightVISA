# Si5351 Frequency Measurement via Keysight VISA

## Overview

This project is designed to measure and analyze signals generated by an Si5351 signal generator controlled via a Raspberry Pi Zero. The measurements are taken using a Keysight DSOX1204G oscilloscope, which communicates with the host system through the VISA protocol. A Python program manages the data acquisition and processes up to 30,000 samples for further analysis.

---

## Components

### 1. **Signal Generator**
   - **Device**: Si5351
   - **Control**: Raspberry Pi Zero

### 2. **Measuring Instrument**
   - **Device**: Keysight DSOX1204G oscilloscope
   - **Communication**: VISA (Virtual Instrument Software Architecture) protocol

### 3. **Software**
   - **Language**: Python
   - **Libraries**:
     - `pyvisa` for VISA communication
     - Standard Python libraries (`datetime`, `time`, `sys`, `signal`)

---

## Objective

The primary goal of this project is to collect 30,000 frequency measurements from the Si5351 signal generator for in-depth analysis. The measurements are averaged over a configurable number of samples to ensure precision.

---

## How It Works

1. **Signal Generation**:
   - The Si5351 generates a signal controlled by the Raspberry Pi Zero.

2. **Signal Measurement**:
   - The Keysight DSOX1204G oscilloscope measures the frequency of the signal.
   - The oscilloscope is connected to the host system via TCP/IP and communicates using the VISA protocol.

3. **Data Collection**:
   - The Python program initializes the oscilloscope and sets it up for frequency measurement.
   - The program collects samples, calculates an average frequency, and converts it into a period.
   - Results are timestamped using Modified Julian Date (MJD) and saved to a file (`timedata.txt`).

4. **Analysis**:
   - The data is prepared for further analysis after the acquisition phase.

---

## Usage

### Requirements

- **Hardware**:
  - Si5351 signal generator
  - Raspberry Pi Zero
  - Keysight DSOX1204G oscilloscope
- **Software**:
  - Python 3.x
  - `pyvisa` library
  - A VISA-compatible instrument driver

### Running the Program

1. Clone the repository:
   ```bash
   git clone https://github.com/peterkaczorowski/Si5351MeasurmentViaKeysightVISA
   cd Si5351MeasurmentViaKeysightVISA
   ```

2. Install the necessary Python libraries:
   ```bash
   pip install pyvisa
   ```

3. Connect the oscilloscope to the network and note its IP address.

4. Edit the script to include the oscilloscope's IP address:
   ```python
   ip_address = "192.168.x.x"  # Replace with your oscilloscope's IP
   ```

5. Run the program:
   ```bash
   python3 script_name.py
   ```

6. Monitor the output in the console or in the `timedata.txt` file.

---

## Output Format

The results are saved in `timedata.txt` in the following format:

```
[MJD: <timestamp>] Averaged frequency: <frequency in MHz>, period: <period in scientific notation>
Elapsed time: <execution time in ms>

measurements counter=<period>, gate=<elapsed time in ms> <MJD timestamp>
```

---

## Author

Piotr Kaczorowski

---

## License

This project is licensed under the [MIT License](LICENSE).

---

## Related Repositories

- https://github.com/peterkaczorowski/AllanToolsCxx
- https://github.com/peterkaczorowski/AllanToolsRust

## Acknowledgments

- **Keysight Technologies** for the DSOX1204G oscilloscope.
- **PyVISA Developers** for providing the VISA Python interface.
- **Raspberry Pi Foundation** for the Raspberry Pi Zero platform.



